<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="MBTA Bus Performance Analysis">
    <meta name="author" content="Huy Le">

	<title>MBTA Key Bus Route Data Visualization</title>

	<link rel="shortcut icon" href="images/favicon.ico">

	<!-- Bootstrap Core CSS -->
	<link rel="stylesheet" href="stylesheets/bootstrap.min.css">	

	<!-- Custom CSS -->
	<link rel="stylesheet" href="stylesheets/style.css">

	<!-- Custom Fonts -->
	<link href="font-awesome-4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href='http://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'>
</head>
<body>
	<div class="jumbotron well">
		<div class="container">
			<div class="row">
				<div class="col-md-8" style="margin-top: 25px">
					<h2 class="section-heading"><b>MBTA Bus Performance</b></h2>
					<h4>An interactive exploration of Boston's bus system</h4>
					<br>
					<h4 id="authors">Huy Le, Yue Zhang, Hua Li, Arlyn Rodriguez, Reva Scharf, Xin Peng - May 2015</h4>
				</div>
				<div class="col-md-4">
					<img class="thumbnail" src="images/mbtaicon.png" height ="200px" style="margin-top: 10px">
				</div>
			</div>
		</div>
	</div>

	<div class="container" style="margin:50px; margin-bottom: 90px">
		<p id="about">
			Boston's Massachusetts Bay Transit Authority (MBTA) operates a busy bus system. The MBTA provided data for us to generate a comparison of on-time bus performance before and after the implementation of significant MBTA service changes that went into effect over the course of spring and summer 2013 (specific dates, by route, are available). <br></br>
			We attempt to present a few visualization tools to help MBTA personnel and people in Boston help better understand the buses and how the change in routes has affected the performance of those buses.
		</p>
	</div>

	<div class="container" style="margin:50px">
		<div class ="row">
			<div class="col-md-7">
				<h2>The Buses</h2>
				<p id="about">
					The MBTA implemented 15 key bus route changes during the spring and summer of 2013. The big question is whether those changes benefited or hurt the on-time bus performance. To better understand how the Key Bus Route Program affected the buses, we produced visualizations on four key metrics: run time, actual vs scheduled times, headway, and wait times.
				</p>
			</div>
			<div class="col-md-5">
				<a href="#headway-example" data-toggle="modal"><img class="thumbnail" src="images/headway-example.png" height ="200px"></a>
			</div>
		</div>
	</div>

	<div class ="modal fade" id ="headway-example" role ="dialog">
		<div class ="container text-center" style="margin-top: 50px">
			<img class="img-responsive" src="images/headway-example.png">
		</div>
	</div>

	<div class="container" style="margin:50px">
		<div class = "row">
			<div class = "col-md-9">
				<h2>Late percentage</h2>
				<p id="about">
					The following graph provides a comparison of the percentages of buses that were late for each key bus routes. A bus is considered late if its headway is greater than 150% of its scheduled headway.
					What percentages of buses were late for that key bus route? The graph compares before (pre) and after (post) the Key Bus Route Program.
				</p>
			</div>
		</div>
		<br>
		<div class ="percentage">
		</div>
	</div>

	<section id="bus-route">
		<div class ="container">
			<div class = "row">
				<h2>Metric comparison</h2>
				<div class = "col-md-6">
					<p id="about">
						The following tool provides a form for analyzing data on the key bus metrics of choice. Submit the form and graphs will populate, providing a comparison between corresponding months in separate years for that metric.
					</p>
				</div>
				<div class = "col-md-6">
					<p id="definitions">
						<span class ="definition-title">Run time:</span> time it takes for a bus to finish a one-way portion of a trip.
						<br>
						<span class ="definition-title">Actual vs Scheduled:</span> actual time that the bus takes to reach its destination compared to the scheduled time planned for the bus to reach that destination.
						<br>
						<span class ="definition-title">Headway:</span> time interval between different buses on a route.
						<br>
						<span class ="definition-title">Wait time:</span> time waited for a bus to reach its stop.
					</p>
				</div>
			</div>
			</br>
			<div class="row">
				<div class="col-md-6">
					<form name ="sentForm" id ="routeForm" novalidate>
						<div class="row">
							<div class="form-group">
								<label class="col-sm-4 control-label">Bus Route</label>
								<select id="busRoute" class="form-control" required>
									<option selected="prompt">Select key bus route</option>
									<option value="1">1</option>
									<option value="15">15</option>
									<option value="22">22</option>
									<option value="23">23</option>
									<option value="28">28</option>
									<option value="32">32</option>
									<option value="39">39</option>
									<option value="57">57</option>
									<option value="66">66</option>
									<option value="71">71</option>
									<option value="73">73</option>
									<option value="77">77</option>
									<option value="111">111</option>
									<option value="116">116</option>
									<option value="117">117</option>
								</select>
							</div>
							<div class="form-group">
								<div class="radio-inline">
									<label>
										<input type="radio" name="inOut" id="r1" value="inbound" required>
										Inbound
									</label>
								</div>
								<div class="radio-inline">
									<label>
										<input type="radio" name="inOut" id="r2" value="outbound" required>
										Outbound
									</label>
								</div>
							</div>
							<!--
							<div class="form-group">
								<label class="col-sm-4 control-label">Year</label>
								<select id="year" class="form-control" required>
									<option selected="prompt">Select year</option>
									<option value="2013">2013</option>
									<option value="2014">2014</option>
								</select>
							</div>
							-->
							<div class="form-group">
								<label class="col-sm-4 control-label">Month</label>
								<select id="month" class="form-control" required>
									<option selected="prompt">Select month</option>
									<option value="January">January</option>
									<option value="February">February</option>
									<option value="March">March</option>
									<option value="April">April</option>
									<option value="May">May</option>
									<option value="June">June</option>
									<option value="July">July</option>
									<option value="August">August</option>
									<option value="September">September</option>
									<option value="October">October</option>
									<option value="November">November</option>
									<option value="December">December</option>
								</select>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label">Metric</label>
								<select id="metric" class="form-control" required>
									<option selected="prompt">Select metric</option>
									<option value="run-time-bar">Run time - Bar chart</option>
									<option value="run-time-line">Run time - Line chart</option>
									<option value="actual-vs-scheduled">Actual vs Scheduled</option>
									<option value="headway">Headway</option>
									<option value="wait-time">Wait time</option>
								</select>
							</div>
							<div class="clearfix"></div>
                            <div class="col-md-12 text-center">
                                <button type="submit" class="btn btn-primary btn-xl">Submit</button>
                            </div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</section>

	<div id="content" class="container" style="margin: 50px">
		<div class = "row">
			<div id = "success1" class = "col-md-6">
			</div>
			<div id = "success2" class = "col-md-6">
			</div>
		</div>
		<div class = "row" id = "versus">
			<div id="legend"></div>
			<div id="success3"></div>
			<div class="chart1"></div>
			<div id="success4"></div>
			<div class="chart2"></div>
		</div>
	</div>

	<div class = "container">
		<div class = "row">
			<div class = "col-md-8">
				<h2>Map</h2>
				<p id="about">
					The following map provides a check-box tool to see where exactly are the 15 key bus routes. Check a box, and markers will populate that bus route.
				</p>
			</div>
		</div>
		<br>
    	<div class = "row">
      		<div class = "col-md-8">
        		<div id="map-canvas"></div>   
      		</div>
      		<div class = "col-md-2">
        		<h4>MBTA 15 Key Bus Routes</h4>
        		</br>
        		<ul id="list">
          		<li>
          			<input type="checkbox" id="route1">
          			<label class="boxes" for="route1">Bus Route 1</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route15">
          			<label class="boxes" for="route15">Bus Route 15</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route22">
          			<label class="boxes" for="route22">Bus Route 22</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route23">
          			<label class="boxes" for="route23">Bus Route 23</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route28">
          			<label class="boxes" for="route28">Bus Route 28</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route32">
          			<label class="boxes" for="route32">Bus Route 32</label>
          		</li>
        		</ul>
      		</div>
      		<div class = "col-md-2">
        		<ul id="list">
          		<li>
          			<input type="checkbox" id="route39">
          			<label class="boxes" for="route39">Bus Route 39</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route57">
          			<label class="boxes" for="route57">Bus Route 57</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route66">
          			<label class="boxes" for="route66">Bus Route 66</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route71">
          			<label class="boxes" for="route71">Bus Route 71</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route73">
          			<label class="boxes" for="route73">Bus Route 73</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route77">
          			<label class="boxes" for="route77">Bus Route 77</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route111">
          			<label class="boxes" for="route111">Bus Route 111</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route116">
          			<label class="boxes" for="route116">Bus Route 116</label>
          		</li>
          		<li>
          			<input type="checkbox" id="route117">
          			<label class="boxes" for="route117">Bus Route 117</label>
          		</li>
        		</ul>
      		</div>
    	</div>
  	</div>
	
	<div class="container" style="margin:50px">
				<h1> <center> ANALYSIS </center></h1>
				<h2>Overview: What We Observed</h2>
				<p id="about">
					Overall, as seen on the late percentage graph, headway improved for six of the key bus routes: 1, 32, 57, 71, 73, and 77. 
					Headway worsened for five of the routes: 15, 22, 23, 28, and 116. For the remaining four routes, there was little to no change.
				</p>
				<h2> Headway </h2>
				<p> 
				Across all routes, the headway changes between the pre- and post- data occurred in the midday (from 10am to 2pm).  Here we observed the biggest spikes in the headway. 
				For the improved routes, this means that the headway was smoothed out here. For the routes whose headways became worse, this is where the spikes occurred. 
				Furthermore, the routes who experience improvements in headway tend to see these improvements in the inbound lines. 
				Conversely, the routes whose headways got worse tend to see these negative changes in the outbound lines.
				</p>
				
				<h2> Run Time </h2> 
				<p> 
				For Runtime, no big changes were detected. The runtime has converged to become more similar across the routes – they are distributed more evenly. 
				For instance, all of the runtimes have come closer to being between 40 and 60 minutes, whereas, before the program, there was more variability (i.e. some buses had 20-minute runtime, others had 40-minute runtimes, and others 60-minute runtimes.  In winter months, runtime gets worse for all routes. 
				</p>
				<h2> Difference Between Actual and Scheduled Arrival Time </h2>
				<p>
				The difference between scheduled and arrival time generally worsened, especially in the afternoon and rush hours. 
				Specifically, this 73 bus experiences the worse change in this metric after the Key Bus Route Program.
				</p>
				<br>
				<br>
				<h2> LOOKING MORE CLOSELY - HEADWAY </h2> 
					<h3> The Good </h3>
						<p>
						The 71 and 77 bus saw great improvements in headway.
						</p>
						<br>
						
						<h4><center>71 Bus</center></h4>
						<p>
						For the 77 bus, the headway improved the most in July (inbound), November (inbound), September (outbound), October (outbound), and November (outbound).
						Let’s look more closely at the headway for July (inbound) pre- and post- KBRP:
						</p>

						<img class="img-analysis" src="images/71-inbound-July.png">

						<p>
						Here we see that the headway aligns more closely with the scheduled headway line in 2013 than in 2012. 
						Although there are spikes between 10am and 3pm, they are less sharp than those that occurred in 2012 within that same time frame. 
						</p>
						<br>
						
						<h4><center>77 Bus</center></h4>
						<p>
						For the 77 bus, the headway improved the most in February (inbound), April (inbound), and November (inbound and outbound).
						Let’s look more closely at the headway for April (inbound) pre- and post- KBRP:
						</p>

						<img class="img-analysis" src="images/77-inbound-April.png">
						
						<p>
						Here again, just looking at the graphs, you notice that the lines are much smoother in 2014 than in 2013. There are few spikes in the graphs and, the ones that are there, align with the scheduled headway line. In the 2013 graph, the headway spikes to 26 minutes just before 11am, then spikes down to zero. In the 2014 graph, however, the headway does go up to 22 minutes, but that is in alignment with the scheduled headway (so it was supposed to happen). On average, the 77 buses stayed pretty close to their scheduled headway throughout the day. 
						</p>
						<br>
						<h3> The Bad </h3>
						<br>
						<h4> <center>23 Bus</center> </h4>
						<p>
						For the 23 bus, the headway worsened in August (outbound). Let’s look at this more closely:
						</p>
						
						<img class="img-analysis" src="images/23-outbound-August.png">
						
						<p>
						In 2013, the headway deviates from the scheduled headway much more often than it does in 2012. This is particularly between 9am and 2pm, where we see sharp spikes in the 2013 graph. 
						</p>
						<br>
						<h4> <center>116 Bus </center></h4>
						<p>For the 116 bus, the headway worsened in September (inbound and outbound), October (outbound), November (outbound), and December (outbound). 
						Let’s look more closely at the headway for September (inbound):
						</p>
						
						<img class="img-analysis" src="images/116-inbound-September.png">
						
						<p>
						In 2013, even though there are quite a number of spikes, they align well with the scheduled headway line. In 2014, on the other hand, there are huge spikes between 9pm and 10:30pm, going 20 minutes above scheduled headway.
						</p>
						<br>
						<h2>SUMMARY</h2>
						<p>
						Since most of the headway spikes occurred during midday hours (10am to 2pm), more has to be done to make sure that there are buses that arrive on time during these hours. 
						More attention needs to be given to the lines whose headways got worse: 15, 22, 23, 28, and 116.
						Since the routes whose headways got worse saw these negative changes in the outbound lines, more attention should be given to outbound service. 
						Thank you for reading our analysis. Feel free to use our tool below to explore the different metrics!
						</p>

						
						
		<br>		
	</div>

	<footer>
        <div class="container">
            <div class="row">
                <div class="col-md-5">
                    <span class="copyright">&copy; 2015 - MBTA Bus Performance. All rights reserved.</span>
                </div>
                <div class="col-md-7">
                    <ul class="list-inline social-buttons">
                        <li><a target="_blank" href="https://github.com/BU-EC500-SP15/mbta-busses-website"><i class="fa fa-github"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- d3 visualization library -->
     <script type="text/javascript" src="javascripts/d3.min.js"></script>

    <!-- Jquery and Bootstrap -->
    <script type="text/javascript" src="javascripts/jquery.js"></script>
    <script type="text/javascript" src="javascripts/bootstrap.min.js"></script>

    <!-- Form JavaScript -->
    <script src="javascripts/jqBootstrapValidation.js"></script>
    <script type="text/javascript" src="javascripts/bus-route-metric.js"></script>

	<!-- Google Map API -->
  	<script type = "text/javascript" src = "https://maps.googleapis.com/maps/api/js?key=AIzaSyA-klagRI08vJ54c1emqvfH7M0s9Gz5b_Q"></script>

    <script src = "javascripts/papaparse.min.js"></script>
  	<script src = "javascripts/bus-map.js"></script>

  	<script src = "javascripts/percentage-late.js"></script>
</body>
</html>